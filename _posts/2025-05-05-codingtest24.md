---
layout: single
title: "파이썬 - 레이저 센서 감시 범위"
categories: coding
tag: [Python, 알고리즘, 코딩테스트, Brute Force, 수학]
toc: true
author_profile: false
sidebar:
  nav: "docs"
---

## 문제
로봇 공학 실험실에 설치된 3차원 격자 공간에는 정육면체 형태의 작은 방들이 <code>N<sup>3</sup></code>개 존재한다. 이 때 `N`은 실험실의 크기이다. <br>
이 실험실에서는 특정 지점 `(a,b,c)`에 강력한 레이저 센서가 설치되어 있다.

레이저 센서는 각각 x, y, z축 방향으로 **앞뒤로 2칸 이내**의 방을 감지할 수 있으며, 세 축 중 **하나라도** 해당 범위 안에 들어오면 해당 방은 "감시 대상"이 된다.

당신은 실험실 관리자이며, 감시 대상이 되는 방의 개수를 계산해야 한다.

### 입력 형식
첫째 줄에 실험실의 크기 `N`이 주어진다. <br>
둘째 줄에 레이저 센서가 설치된 좌표 `a,b,c`가 공백으로 구분되어 주어진다. 각 `a,b,c`는 `N`이하의 자연수이다.

### 출력 형식
감시 대상이 되는 방의 총 개수를 출력하시오.

### 입출력 예제
입력
```
10
9 7 8
```
출력
```
850
```

### 예제 설명
`N`이 10일 때 전체 방의 개수는 `10 x 10 x 10 = 1000`이다. <br>
방의 좌표는 `(9, 7, 8)`이므로 각 자리의 앞뒤로 2칸 이내인 자리는 다음과 같다.

|x|range|count|
|-----|-----|----|
|9|7, 8, 9, 10| 4|

|y|range|count|
|-----|-----|----|
|7|5, 6, 7, 8, 9| 5|

|z|range|count|
|-----|-----|----|
|8|6, 7, 8, 9, 10| 5|

세 축 중 하나라도 해당 범위 안에 들어오면 감시 대상이므로 감시 대상이 아닌 방은 세 축 모두 앞뒤로 2칸 이내가 아니어야 한다. <br>
이를 만족하는 x, y, z의 좌표는 다음과 같다.

|x|range|count|
|-----|-----|----|
|9|1, 2, 3, 4, 5, 6| 6|

|y|range|count|
|-----|-----|----|
|7|1, 2, 3, 4, 10| 5|

|z|range|count|
|-----|-----|----|
|8|1, 2, 3, 4, 5| 5|

감시 대상이 아닌 방의 조합은 `6 x 5 x 5 = 150`개이므로 감시 대상인 방의 개수는 `1000 - 150 = 850`이다.

### 풀이법 1
```python
N = int(input())
a, b, c = map(int, input().split())

ans = 0
for i in range(1, N + 1):
    for j in range(1, N + 1):
        for k in range(1, N + 1):
            if abs(i - a) <= 2 or abs(j - b) <= 2 or abs(k - c) <= 2:
                ans += 1

print(ans)
```

1. `x, y, z`축 방향을 1부터 `N`까지 반복.
2. 현재 좌표가 센서의 감시 범위 내에 있는지 확인
  - 센서의 좌표는 (a, b, c)이고 x, y, z 중 적어도 하나의 축이 센서로부터 거리가 2 이내인지 확인
  - 세 조건 중 하나라도 만족하면 감시 대상이므로 1을 증가

### 풀이법 2
```python
N = int(input())
a, b, c = map(int, input().split())

# Please write your code here.
a_out = sum(abs(a - i) > 2 for i in range(1, N+1))
b_out = sum(abs(b - i) > 2 for i in range(1, N+1))
c_out = sum(abs(c - i) > 2 for i in range(1, N+1))

print(N ** 3 - a_out * b_out * c_out))
```

### 아이디어
적어도 하나의 축이 감지하는 범위 안에 있는지 확인 → `전체 경우 - 세 축 모두 감지 범위를 벗어난 경우`

1. `x, y, z`축에서 감지 범위를 벗어난 위치의 개수 구하기
  - 만약 `x`이면 `a`와 `i`의 오차가 2보다 큰 경우 → 만족하는 조건의 합계를 구하기 (`i`는 1부터 `N`까지) (`a_out`)
  - `y`, `z`도 위와 같은 방식으로 오차가 2보다 큰 경우의 합계를 구하기 (`b_out`, `c_out`)

2. `a_out * b_out * c_out`은 3개의 축 모두 감시 범위 밖의 격자의 수
3. 전체 격자의 수가 <code>N<sup>3</sup></code>이므로 전체 격자에서 감시 범위 밖의 격자 수를 제외하면 감시 대상이 되는 격자의 개수를 구한다.

### 풀이법 3
```python
N = int(input())
a, b, c = map(int, input().split())

# Please write your code here.

a_out = max(0, a - 3) + max(0, N - a - 2)
b_out = max(0, b - 3) + max(0, N - b - 2)
c_out = max(0, c - 3) + max(0, N - c - 2)

print(N ** 3 - a_out * b_out * c_out)
```

### 아이디어
`(x, y, z)`가 센서의 감시 범위는 다음과 같다. (x축 기준) <br>
`a - 2 ≤ x ≤ a + 2`

센서의 감시 범위 밖은 다음과 같다.<br>
`x ＞ a + 2 or x ＜ a - 2` <br>
```
x ＞ a + 2
→ 개수는 a + 3 ~ N 이므로 N - a - 3 + 1 = N - a - 2개

x < a - 2
→ 개수는 1 ~ a - 3 이므로 a - 3개
```

만약 `a - 3`, `N - a - 2`가 음수이면 0으로 대체

이와 같은 방식으로 `y, z`축에서 감시 범위를 벗어난 좌표의 수를 구한다.

## 풀이법 비교
### 풀이법 1
- 3차원 격자를 전부 탐색하며 조건이 만족하는지 검사 (Brute Force)
- <code>O(n<sup>3</sup>)</code>의 시간.

### 풀이법 2
- 감시 범위 밖의 조합의 개수를 구한 후 전체 경우에서 빼기
- <code>O(n)</code>의 시간

### 풀이법 3
- 감시 범위의 공식을 이용하여 감시 범위 밖의 조합을 구한 후 전체 경우에서 빼기
- <code>O(1)</code>의 시간
